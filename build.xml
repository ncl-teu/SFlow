<?xml version="1.0" encoding="UTF-8"?>
<project name="gripps" default="dist" basedir=".">
  <description>This buildfile was generated by GenerateAnt plugin for IntelliJ IDEA</description>
  <!--set global properties for this build-->
  <property name="src" location="src" />
  <property name="build" location="classes" />
 <property name="lib" location="lib" />
  <property name="dist" location="dist" />
  <property name="distlib" location="dist/lib" />
  <property name="docs" location="docs" />
  <property name="docsapi" location="docs/api" />
  <property name="tests" location="test" />
  <property name="reports" location="test/report" />
  <property name="htmlreports" location="test/report/html" />
    <property name="ccndir" location="classes/net/gripps/ccn"/>
    <property name="clouddir" location="classes/net/gripps/cloud"/>
    <property name="workflowdir" location="classes/org/ncl/workflow"/>

  <target name="clean">
    <!--Delete created directory trees-->
    <delete dir="${build}" includeEmptyDirs="true" />
    <delete includeEmptyDirs="true">
      <fileset dir="${dist}" excludes="lib/**" />
    </delete>
    <delete dir="${docs}" includeEmptyDirs="true" />
    <delete dir="${docsapi}" includeEmptyDirs="true" />
    <delete dir="${tests}" includeEmptyDirs="true" />
    <delete dir="${reports}" includeEmptyDirs="true" />
    <delete dir="${htmlreports}" includeEmptyDirs="true" />
  </target>
  <target name="init">
    <!--creates the build directory-->
    <mkdir dir="${build}" />
    <mkdir dir="${dist}" />
    <mkdir dir="${distlib}" />
    <mkdir dir="${docs}" />
    <mkdir dir="${docsapi}" />
    <mkdir dir="${tests}" />
    <mkdir dir="${reports}" />
    <mkdir dir="${htmlreports}" />
  </target>
  <target name="resources">
    <copy todir="${build}">
      <fileset dir="${src}">
        <include name="**/*.jpe" />
        <include name="**/*.jpeg" />
        <include name="**/*.rmf" />
        <include name="**/*.wav" />
        <include name="**/*.mid" />
        <include name="**/*.midi" />
        <include name="**/*.au" />
        <include name="**/*.gif" />
        <include name="**/*.png" />
        <include name="**/*.aiff" />
        <include name="**/*.properties" />
      </fileset>
    </copy>
  </target>
  <target name="build" depends="init, resources">
    <!--Compiles the java code from ${src} directory into ${build} directory-->
    <javac destdir="${build}">
      <src path="${src}" />

     <classpath path="${lib}/commons-math-2.0.jar" />
        <classpath path="${lib}/jdom-2.0.0.jar" />
        <classpath path="${lib}/log4j-api-2.11.1.jar" />

        <classpath path="${lib}/jsock-20190503.jar" />
        <classpath path="${lib}/jackson-annotations-2.9.8.jar" />
        <classpath path="${lib}/jackson-core-2.9.8.jar" />
        <classpath path="${lib}/jackson-databind-2.9.8.jar" />
        <classpath path="${lib}/commons-net-3.6.jar" />


        <!--<classpath path="${lib}/commons-math3-3.2.jar" /> -->
      <!--<exclude name="**/*Test.java" />
      <exclude name="**/Test*.java" />  -->
    </javac>
  </target>
  <target name="dist" depends="build">
    <!--Put everything in ${build} into the MyProject-${DSTAMP}.jar file-->
    <tstamp />
    <jar jarfile="${dist}/gripps-${DSTAMP}.jar" basedir="${build}" />
  </target>
  <target name="doc" depends="init">
    <javadoc destdir="${docsapi}" author="true" version="true" use="true" windowtitle="API for gripps" encoding="UTF-8">
      <fileset dir="${src}" defaultexcludes="yes">
        <!--<exclude name="**/*Test.java" />
        <exclude name="**/Test*.java" />  -->
      </fileset>
    </javadoc>
  </target>
  <target name="build_tests" depends="init">
    <!--Compiles the tests into ${tests} directory-->
    <javac destdir="${tests}">
      <src path="${src}" />
        <classpath path="${lib}/commons-math-2.0.jar" />
        <classpath path="${lib}/jdom-2.0.0.jar" />
        <classpath path="${lib}/log4j-api-2.11.1.jar" />
        <classpath path="${lib}/log4j-core-2.11.1.jar" />
        <classpath path="${lib}/jsock-20190503.jar" />
        <classpath path="${lib}/jackson-annotations-2.9.8.jar" />
        <classpath path="${lib}/jackson-core-2.9.8.jar" />
        <classpath path="${lib}/jackson-databind-2.9.8.jar" />
        <classpath path="${lib}/commons-net-3.6.jar" />
        <include name="**/*Test.java" />
      <include name="**/Test*.java" />
      <src path="${src}" />
    </javac>
  </target>
  <target name="run_tests" depends="build, build_tests">
    <junit printsummary="yes">
      <classpath path="${build}" />
      <classpath path="${tests}" />
      <formatter type="xml" usefile="true" />
      <batchtest todir="${reports}">
        <fileset dir="${tests}">
          <include name="**/*Test.class" />
          <include name="**/Test*.class" />
        </fileset>
      </batchtest>
    </junit>
  </target>
  <target name="report" depends="run_tests">
    <junitreport todir="${reports}">
      <fileset dir="${reports}">
        <include name="TEST-*.xml" />
      </fileset>
      <report format="noframes" todir="${htmlreports}" />
    </junitreport>
  </target>
    <target name="encoding">
        <native2ascii src="src" dest="src2">
            <!-- <exclude name="**/*.java" />-->
            <include name="**/*.java" />
            <include name="**/*.properties" />
        </native2ascii>
    </target>
    <target name="build_nclw" depends="init, resources">
        <!--Compiles the java code from ${src} directory into ${build} directory-->
        <javac destdir="${build}">
            <src path="${src}/org" />

            <classpath path="${lib}/commons-math-2.0.jar" />
            <classpath path="${lib}/jdom-2.0.0.jar" />
            <classpath path="${lib}/log4j-api-2.11.1.jar" />
            <classpath path="${lib}/log4j-core-2.11.1.jar" />
            <classpath path="${lib}/jsock-20190503.jar" />
            <classpath path="${lib}/jackson-annotations-2.9.8.jar" />
            <classpath path="${lib}/jackson-core-2.9.8.jar" />
            <classpath path="${lib}/jackson-databind-2.9.8.jar" />
            <classpath path="${lib}/commons-net-3.6.jar" />
            <!--<classpath path="${lib}/commons-math3-3.2.jar" /> -->
            <!--<exclude name="**/*Test.java" />
            <exclude name="**/Test*.java" />  -->
        </javac>
    </target>
    <target name="dist_nclw" depends="build_nclw">
        <!--Put everything in ${build} into the MyProject-${DSTAMP}.jar file-->
        <tstamp />
        <jar jarfile="${dist}/nclw-${DSTAMP}.jar" basedir="${build}" />
    </target>
    <target name="jar_sched" >
        <jar jarfile="${lib}/ncl-taskschedsim.jar" basedir="${build}">

        </jar>
    </target>
    <target name="jar_sfc" >
        <jar jarfile="${lib}/ncl-sfc.jar" basedir="${build}">

        </jar>
    </target>
</project>

