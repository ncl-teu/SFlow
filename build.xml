<?xml version="1.0" encoding="UTF-8"?>
<project name="gripps" default="dist" basedir=".">
  <description>This buildfile was generated by GenerateAnt plugin for IntelliJ IDEA</description>
  <!--set global properties for this build-->
  <property name="src" location="src" />
  <property name="build" location="classes" />
 <property name="lib" location="lib" />
  <property name="dist" location="dist" />
  <property name="distlib" location="dist/lib" />
  <property name="docs" location="docs" />
  <property name="docsapi" location="docs/api" />
  <property name="tests" location="test" />
  <property name="reports" location="test/report" />
  <property name="htmlreports" location="test/report/html" />
    <property name="ccndir" location="classes/net/gripps/ccn"/>
    <property name="clouddir" location="classes/net/gripps/cloud"/>
    <property name="workflowdir" location="classes/org/ncl/workflow"/>
    <property name="dir_tasksched" location="${dist}/tasksched"/>
    <property name="dir_ccn" location="${dist}/ccn"/>
    <property name="dir_mapreduce" location="${dist}/mapreduce"/>
    <property name="dir_gridp2p" location="${dist}/gridp2p"/>
    <property name="dir_sfc" location="${dist}/sfc"/>
    <property name="dir_mobileedgecomp" location="${dist}/mobileedgecomp"/>
    <property name="dir_nclw" location="${dist}/nclw"/>
    <property name="dir_nclwh" location="${dist}/nclwh"/>
    <property name="dir_nfd" location="${dist}/nfd"/>



    <target name="clean">
    <!--Delete created directory trees-->
    <delete dir="${build}" includeEmptyDirs="true" />
    <delete includeEmptyDirs="true">
      <fileset dir="${dist}" excludes="lib/**" />
    </delete>
    <delete dir="${docs}" includeEmptyDirs="true" />
    <delete dir="${docsapi}" includeEmptyDirs="true" />
    <delete dir="${tests}" includeEmptyDirs="true" />
    <delete dir="${reports}" includeEmptyDirs="true" />
    <delete dir="${htmlreports}" includeEmptyDirs="true" />
  </target>
  <target name="init">
    <!--creates the build directory-->
    <mkdir dir="${build}" />
    <mkdir dir="${dist}" />
    <mkdir dir="${distlib}" />
    <mkdir dir="${docs}" />
    <mkdir dir="${docsapi}" />
    <mkdir dir="${tests}" />
    <mkdir dir="${reports}" />
    <mkdir dir="${htmlreports}" />
      <mkdir dir="${dir_ccn}" />
      <mkdir dir="${dir_gridp2p}" />
      <mkdir dir="${dir_mapreduce}" />
      <mkdir dir="${dir_mobileedgecomp}" />
      <mkdir dir="${dir_nclw}" />
      <mkdir dir="${dir_nclwh}" />
      <mkdir dir="${dir_sfc}" />


  </target>
  <target name="resources">
    <copy todir="${build}">
      <fileset dir="${src}">
        <include name="**/*.jpe" />
        <include name="**/*.jpeg" />
        <include name="**/*.rmf" />
        <include name="**/*.wav" />
        <include name="**/*.mid" />
        <include name="**/*.midi" />
        <include name="**/*.au" />
        <include name="**/*.gif" />
        <include name="**/*.png" />
        <include name="**/*.aiff" />
        <include name="**/*.properties" />
      </fileset>
    </copy>
  </target>
  <target name="build" depends="init, resources">
    <!--Compiles the java code from ${src} directory into ${build} directory-->
    <javac encoding="utf-8" destdir="${build}">
      <src path="${src}" />

     <classpath path="${lib}/commons-math-2.0.jar" />
        <classpath path="${lib}/jdom-2.0.0.jar" />
        <classpath path="${lib}/log4j-api-2.11.1.jar" />

        <classpath path="${lib}/jsock-20190503.jar" />
        <classpath path="${lib}/jackson-annotations-2.9.8.jar" />
        <classpath path="${lib}/jackson-core-2.9.8.jar" />
        <classpath path="${lib}/jackson-databind-2.9.8.jar" />
        <classpath path="${lib}/commons-net-3.6.jar" />
        <classpath path="${lib}/docker-java-api-0.0.10-jar-with-dependencies.jar" />
        <classpath path="${lib}/javax.json-api-1.1.4.jar" />
        <classpath path="${lib}/javax.json-1.1.jar" />
        <classpath path="${lib}/ganymed-ssh2-build210.jar" />
        <classpath path="${lib}/jsch-0.1.55.jar" />

        <classpath path="${lib}/jndn.jar" />
        <classpath path="${lib}/sqlite-jdbc-3.23.1.jar" />
        <classpath path="${lib}/protobuf-java-2.6.1.jar" />
        <classpath path="${lib}/jndn-management-master-1.2.2.jar" />
        <classpath path="${lib}/jndn-forwarder.jar" />
        <classpath path="${lib}/jndn-utils.jar" />



        <!--<classpath path="${lib}/commons-math3-3.2.jar" /> -->
      <!--<exclude name="**/*Test.java" />
      <exclude name="**/Test*.java" />  -->
    </javac>
  </target>
  <target name="dist" depends="build">
    <!--Put everything in ${build} into the MyProject-${DSTAMP}.jar file-->
    <tstamp />
    <jar jarfile="${dist}/gripps-${DSTAMP}.jar" basedir="${build}" />
  </target>
  <target name="doc" depends="init">
    <javadoc destdir="${docsapi}" author="true" version="true" use="true" windowtitle="API for gripps" encoding="UTF-8">
      <fileset dir="${src}" defaultexcludes="yes">
        <!--<exclude name="**/*Test.java" />
        <exclude name="**/Test*.java" />  -->
      </fileset>
    </javadoc>
  </target>



    <target name="encoding">
        <native2ascii src="src" dest="src2">
            <!-- <exclude name="**/*.java" />-->
            <include name="**/*.java" />
            <include name="**/*.properties" />
        </native2ascii>
    </target>

    <target name="dist_sfc" depends="build">
        <jar jarfile="${lib}/ncl-sfc.jar" basedir="${build}"  includes="net/gripps/cloud/core/**,net/gripps/cloud/mapreduce/**,net/gripps/cloud/nfv/**,net/gripps/cloud/CloudUtil.class"/>
        <mkdir dir="${dir_sfc}" />
        <mkdir dir="${dir_sfc}/lib/"/>
        <copy file="${lib}/ncl-taskschedsim.jar" todir="${dir_sfc}/lib/"/>
        <copy file="${lib}/ncl-sfc.jar" todir="${dir_sfc}/lib/"/>
        <copy file="${lib}/commons-collections-3.2.jar" todir="${dir_sfc}/lib/"/>
        <copy file="${lib}/commons-math-2.0.jar" todir="${dir_sfc}/lib/"/>
        <copy file="${lib}/log4j-api-2.11.1.jar" todir="${dir_sfc}/lib/"/>
        <copy file="${lib}/log4j-core-2.11.1.jar" todir="${dir_sfc}/lib/"/>


        <copy file="nfv.properties" todir="${dir_sfc}"/>
        <copy file="nclw_nfvrun.sh" todir="${dir_sfc}"/>
        <copy file="nclw_nfvrun.bat" todir="${dir_sfc}"/>
    </target>



    <target name="dist_workflow" depends="build">
        <jar jarfile="${lib}/ncl-sfcworkflow.jar" basedir="${build}"  includes="org/**"/>
        <jar jarfile="${lib}/jndn-forwarder-ncl.jar" basedir="${build}"  includes="com/**,main/**"/>
        <mkdir dir="${dir_nclw}" />
        <mkdir dir="${dir_nclw}/lib/"/>
        <mkdir dir="${dir_nclw}/nclw/"/>
        <copy file="${lib}/ncl-sfcworkflow.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/ncl-taskschedsim.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/ncl-sfc.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/commons-collections-3.2.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/commons-math-2.0.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/commons-net-3.6.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/ganymed-ssh2-build210.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jackson-annotations-2.9.8.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jackson-core-2.9.8.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jackson-databind-2.9.8.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jdom-2.0.0.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jsock-20190503.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/log4j-api-2.11.1.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/log4j-core-2.11.1.jar" todir="${dir_nclw}/lib/"/>
        <copy file="nclw/job_ncl.json" todir="${dir_nclw}/nclw"/>
        <copy file="nclw/env.json" todir="${dir_nclw}/nclw"/>
        <copy file="nclw/env_ncl.json" todir="${dir_nclw}/nclw"/>
        <copy file="nclw/env_ncl1.json" todir="${dir_nclw}/nclw"/>
        <copy file="nclw/job_ffmpeg.json" todir="${dir_nclw}/nclw"/>
        <copy file="nclw2.properties" todir="${dir_nclw}"/>
        <copy file="nclwccn.properties" todir="${dir_nclw}"/>
        <copy file="nclw_worker.sh" todir="${dir_nclw}"/>
        <copy file="nclw_delegator.sh" todir="${dir_nclw}"/>
        <copy file="ffmpeg_delegator.sh" todir="${dir_nclw}"/>
        <copy file="nclw_worker.bat" todir="${dir_nclw}"/>
        <copy file="nclw_delegator.bat" todir="${dir_nclw}"/>
        <copy file="nclw_moduleup.sh" todir="${dir_nclw}"/>
        <copy file="nclw_startworker.sh" todir="${dir_nclw}"/>
        <copy file="nclw_stopworker.sh" todir="${dir_nclw}"/>
        <copy file="ccn_consumer.sh" todir="${dir_nclw}"/>
        <copy file="nclw_nfd.sh" todir="${dir_nclw}"/>
        <copy file="nclw_nfdelegator.sh" todir="${dir_nclw}"/>
        <copy file="nclw_nfdstartworker.sh" todir="${dir_nclw}"/>
        <copy file="nclw_nfdcollectlog.sh" todir="${dir_nclw}"/>
        <copy file="nclw_hosts" todir="${dir_nclw}"/>
        <copy file="${lib}/jsch-0.1.55.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jndn.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/sqlite-jdbc-3.23.1.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/protobuf-java-2.6.1.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jndn-management-master-1.2.2.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jndn-forwarder-ncl.jar" todir="${dir_nclw}/lib/"/>
        <copy file="${lib}/jndn-utils.jar" todir="${dir_nclw}/lib/"/>

    </target>

    <target name="dist_nfd" depends="build">
        <jar jarfile="${lib}/ncl-nfd.jar" basedir="${build}"  includes="org/ncl/workflow/ccn/**" excludes="org/ncl/workflow/ccn/sfc/**"/>
        <jar jarfile="${lib}/jndn-forwarder-ncl.jar" basedir="${build}"  includes="com/**,main/**"/>
        <mkdir dir="${dir_nfd}" />
        <mkdir dir="${dir_nfd}/lib/"/>
        <copy file="nfd_consumer.sh" todir="${dir_nfd}"/>
        <copy file="nfd_consumer.bat" todir="${dir_nfd}"/>
        <copy file="nfd.bat" todir="${dir_nfd}"/>
        <copy file="nfd.sh" todir="${dir_nfd}"/>
        <copy file="${lib}/jndn.jar" todir="${dir_nfd}/lib/"/>
        <copy file="${lib}/sqlite-jdbc-3.23.1.jar" todir="${dir_nfd}/lib/"/>
        <copy file="${lib}/protobuf-java-2.6.1.jar" todir="${dir_nfd}/lib/"/>
        <copy file="${lib}/jndn-management-master-1.2.2.jar" todir="${dir_nfd}/lib/"/>
        <copy file="${lib}/jndn-forwarder-ncl.jar" todir="${dir_nfd}/lib/"/>
        <copy file="${lib}/jndn-utils.jar" todir="${dir_nfd}/lib/"/>
        <copy file="${lib}/ncl-nfd.jar" todir="${dir_nfd}/lib/"/>

    </target>




    <target name="dist_tasksched" depends="build">
        <jar jarfile="${lib}/ncl-taskschedsim.jar" basedir="${build}"  includes="net/gripps/clustering/**,net/gripps/environment/**,net/gripps/FFT/**,
net/gripps/GJ/**,net/gripps/grouping/**,net/gripps/mapping/**,net/gripps/scheduling/**,net/gripps/util/**"/>
        <mkdir dir="${dir_tasksched}" />
        <mkdir dir="${dir_tasksched}/lib/"/>
        <mkdir dir="${dir_tasksched}/dax/"/>
        <mkdir dir="${dir_tasksched}/daxbak/"/>
        <copy file="${lib}/ncl-taskschedsim.jar" todir="${dir_tasksched}/lib/"/>
        <copy file="${lib}/commons-collections-3.2.jar" todir="${dir_tasksched}/lib/"/>
        <copy file="${lib}/commons-math-2.0.jar" todir="${dir_tasksched}/lib/"/>
        <copy file="hetero1.properties" todir="${dir_tasksched}"/>
        <copy file="run_tasksched.sh" todir="${dir_tasksched}"/>
        <copy file="run_tasksched.bat" todir="${dir_tasksched}"/>
        <copy todir="${dir_tasksched}/dax/">
            <fileset dir="dax" includes="*.xml"/>
        </copy>
        <copy todir="${dir_tasksched}/daxbak/">
            <fileset dir="daxbak" includes="*.xml"/>
        </copy>

    </target>
    <target name="jar_sfc" >
        <jar jarfile="${lib}/ncl-sfc.jar" basedir="${build}">

        </jar>
    </target>
</project>

